/* Gnonogram_viewer.c generated by valac 0.11.6, the Vala compiler
 * generated from Gnonogram_viewer.vala, do not modify */

/*  Copyright (C) 2010-2011  Jeremy Wootten
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
 *
 * As a special exception, if you use inline functions from this file, this
 * file does not by itself cause the resulting executable to be covered by
 * the GNU Lesser General Public License.
 *
 *  Author:
 * 	Jeremy Wootten <jeremwootten@gmail.com>
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <float.h>
#include <math.h>


#define TYPE_GNONOGRAM_VIEW (gnonogram_view_get_type ())
#define GNONOGRAM_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GNONOGRAM_VIEW, Gnonogram_view))
#define GNONOGRAM_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GNONOGRAM_VIEW, Gnonogram_viewClass))
#define IS_GNONOGRAM_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GNONOGRAM_VIEW))
#define IS_GNONOGRAM_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GNONOGRAM_VIEW))
#define GNONOGRAM_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GNONOGRAM_VIEW, Gnonogram_viewClass))

typedef struct _Gnonogram_view Gnonogram_view;
typedef struct _Gnonogram_viewClass Gnonogram_viewClass;
typedef struct _Gnonogram_viewPrivate Gnonogram_viewPrivate;

#define TYPE_GNONOGRAM_CONTROLLER (gnonogram_controller_get_type ())
#define GNONOGRAM_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GNONOGRAM_CONTROLLER, Gnonogram_controller))
#define GNONOGRAM_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GNONOGRAM_CONTROLLER, Gnonogram_controllerClass))
#define IS_GNONOGRAM_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GNONOGRAM_CONTROLLER))
#define IS_GNONOGRAM_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GNONOGRAM_CONTROLLER))
#define GNONOGRAM_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GNONOGRAM_CONTROLLER, Gnonogram_controllerClass))

typedef struct _Gnonogram_controller Gnonogram_controller;
typedef struct _Gnonogram_controllerClass Gnonogram_controllerClass;
#define _gnonogram_controller_unref0(var) ((var == NULL) ? NULL : (var = (gnonogram_controller_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define TYPE_GNONOGRAM_LABELBOX (gnonogram_labelbox_get_type ())
#define GNONOGRAM_LABELBOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GNONOGRAM_LABELBOX, Gnonogram_LabelBox))
#define GNONOGRAM_LABELBOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GNONOGRAM_LABELBOX, Gnonogram_LabelBoxClass))
#define IS_GNONOGRAM_LABELBOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GNONOGRAM_LABELBOX))
#define IS_GNONOGRAM_LABELBOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GNONOGRAM_LABELBOX))
#define GNONOGRAM_LABELBOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GNONOGRAM_LABELBOX, Gnonogram_LabelBoxClass))

typedef struct _Gnonogram_LabelBox Gnonogram_LabelBox;
typedef struct _Gnonogram_LabelBoxClass Gnonogram_LabelBoxClass;

#define TYPE_GNONOGRAM_CELLGRID (gnonogram_cellgrid_get_type ())
#define GNONOGRAM_CELLGRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GNONOGRAM_CELLGRID, Gnonogram_CellGrid))
#define GNONOGRAM_CELLGRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GNONOGRAM_CELLGRID, Gnonogram_CellGridClass))
#define IS_GNONOGRAM_CELLGRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GNONOGRAM_CELLGRID))
#define IS_GNONOGRAM_CELLGRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GNONOGRAM_CELLGRID))
#define GNONOGRAM_CELLGRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GNONOGRAM_CELLGRID, Gnonogram_CellGridClass))

typedef struct _Gnonogram_CellGrid Gnonogram_CellGrid;
typedef struct _Gnonogram_CellGridClass Gnonogram_CellGridClass;
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block1Data Block1Data;
typedef struct _Block2Data Block2Data;
typedef struct _Block3Data Block3Data;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define TYPE_GAME_STATE (game_state_get_type ())

struct _Gnonogram_view {
	GtkWindow parent_instance;
	Gnonogram_viewPrivate * priv;
	GtkToolbar* _toolbar;
};

struct _Gnonogram_viewClass {
	GtkWindowClass parent_class;
};

struct _Gnonogram_viewPrivate {
	Gnonogram_controller* _controller;
	GtkSpinButton* _grade_spin;
	GtkToggleToolButton* _hide_tool;
	GtkToolButton* _check_tool;
	GtkCheckMenuItem* _gridmenuitem;
	GtkMenuItem* _checkerrorsmenuitem;
	GtkMenuItem* _showsolutionmenuitem;
	GtkMenuItem* _showworkingmenuitem;
	GtkMenuItem* grademenuitem;
	GtkLabel* _name_label;
	GtkLabel* _author_label;
	GtkLabel* _date_label;
	GtkLabel* _size_label;
	GtkLabel* _score_label;
};

struct _Block1Data {
	int _ref_count_;
	Gnonogram_view * self;
	GtkCheckMenuItem* advancedmenuitem;
	GtkCheckMenuItem* difficultmenuitem;
};

struct _Block2Data {
	int _ref_count_;
	Gnonogram_view * self;
	GtkToolItem* grade_tool;
};

struct _Block3Data {
	int _ref_count_;
	Gnonogram_view * self;
	GtkWindow* win;
	GtkSpinButton* grade_spin2;
};

typedef enum  {
	GAME_STATE_SETTING,
	GAME_STATE_SOLVING
} GameState;


static gpointer gnonogram_view_parent_class = NULL;
extern gchar* resource_icon_dir;
extern gint resource_MAXGRADE;
extern gchar* resource_resource_dir;
extern gchar* resource_manual_dir;

GType gnonogram_view_get_type (void) G_GNUC_CONST;
gpointer gnonogram_controller_ref (gpointer instance);
void gnonogram_controller_unref (gpointer instance);
GParamSpec* param_spec_gnonogram_controller (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_gnonogram_controller (GValue* value, gpointer v_object);
void value_take_gnonogram_controller (GValue* value, gpointer v_object);
gpointer value_get_gnonogram_controller (const GValue* value);
GType gnonogram_controller_get_type (void) G_GNUC_CONST;
#define GNONOGRAM_VIEW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_GNONOGRAM_VIEW, Gnonogram_viewPrivate))
enum  {
	GNONOGRAM_VIEW_DUMMY_PROPERTY
};
GType gnonogram_labelbox_get_type (void) G_GNUC_CONST;
GType gnonogram_cellgrid_get_type (void) G_GNUC_CONST;
Gnonogram_view* gnonogram_view_new (Gnonogram_LabelBox* rb, Gnonogram_LabelBox* cb, Gnonogram_CellGrid* dg, Gnonogram_controller* controller);
Gnonogram_view* gnonogram_view_construct (GType object_type, Gnonogram_LabelBox* rb, Gnonogram_LabelBox* cb, Gnonogram_CellGrid* dg, Gnonogram_controller* controller);
static gboolean _lambda0_ (Gnonogram_view* self);
static gboolean __lambda0__gtk_widget_delete_event (GtkWidget* _sender, GdkEvent* event, gpointer self);
void gnonogram_view_set_name (Gnonogram_view* self, const gchar* name);
void gnonogram_view_set_author (Gnonogram_view* self, const gchar* author);
void gnonogram_view_set_date (Gnonogram_view* self, const gchar* date);
gchar* utils_get_todays_date_string (void);
static void gnonogram_view_create_viewer_toolbar (Gnonogram_view* self);
static GtkMenuBar* gnonogram_view_create_viewer_menubar (Gnonogram_view* self);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (Block1Data* _data1_);
static void _lambda14_ (Gnonogram_view* self);
static void __lambda14__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda15_ (Gnonogram_view* self);
static void __lambda15__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda16_ (Gnonogram_view* self);
static void __lambda16__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda17_ (Gnonogram_view* self);
static void __lambda17__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda18_ (Gnonogram_view* self);
static void __lambda18__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda19_ (Gnonogram_view* self);
static void __lambda19__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda20_ (Gnonogram_view* self);
static void __lambda20__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda21_ (Gnonogram_view* self);
static void __lambda21__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda22_ (Gnonogram_view* self);
static void __lambda22__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda23_ (Gnonogram_view* self);
static void __lambda23__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda24_ (Gnonogram_view* self);
static void __lambda24__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda25_ (Gnonogram_view* self);
static void __lambda25__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda26_ (Gnonogram_view* self);
static void __lambda26__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda27_ (Gnonogram_view* self);
static void __lambda27__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda28_ (Gnonogram_view* self);
static void __lambda28__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda29_ (Gnonogram_view* self);
static void __lambda29__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void gnonogram_view_getdifficulty (Gnonogram_view* self);
static void _gnonogram_view_getdifficulty_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void gnonogram_view_editdescription (Gnonogram_view* self);
static void _gnonogram_view_editdescription_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda30_ (Block1Data* _data1_);
static void __lambda30__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda31_ (Block1Data* _data1_);
static void __lambda31__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void gnonogram_view_toggle_toolbar (Gnonogram_view* self, GtkMenuItem* cmi);
static void _gnonogram_view_toggle_toolbar_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _lambda32_ (Gnonogram_view* self);
static void __lambda32__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void gnonogram_view_show_about (Gnonogram_view* self);
static void _gnonogram_view_show_about_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void gnonogram_view_show_manual (Gnonogram_view* self);
static void _gnonogram_view_show_manual_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (Block2Data* _data2_);
static void _lambda1_ (Gnonogram_view* self);
static void __lambda1__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda2_ (Gnonogram_view* self);
static void __lambda2__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda3_ (Gnonogram_view* self);
static void __lambda3__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void gnonogram_view_toggle_execute (Gnonogram_view* self);
static void _gnonogram_view_toggle_execute_gtk_toggle_tool_button_toggled (GtkToggleToolButton* _sender, gpointer self);
static void _lambda4_ (Gnonogram_view* self);
static void __lambda4__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda5_ (Gnonogram_view* self);
static void __lambda5__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda6_ (Gnonogram_view* self);
static void __lambda6__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda7_ (Gnonogram_view* self);
static void __lambda7__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda8_ (GtkSpinButton* sb, Gnonogram_view* self);
static void __lambda8__gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self);
static gboolean _lambda9_ (Block2Data* _data2_);
static gboolean __lambda9__gtk_tool_item_create_menu_proxy (GtkToolItem* _sender, gpointer self);
static void _lambda11_ (Gnonogram_view* self);
static void __lambda11__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda12_ (Gnonogram_view* self);
static void __lambda12__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _lambda13_ (Gnonogram_view* self);
static void __lambda13__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (Block3Data* _data3_);
static gboolean _lambda10_ (Block3Data* _data3_);
void gnonogram_view_set_grade_spin_value (Gnonogram_view* self, gdouble d);
static gboolean __lambda10__gtk_widget_leave_notify_event (GtkWidget* _sender, GdkEventCrossing* event, gpointer self);
void utils_show_warning_dialog (const gchar* msg);
gchar* gnonogram_view_get_name (Gnonogram_view* self);
gchar* gnonogram_view_get_author (Gnonogram_view* self);
gchar* gnonogram_view_get_date (Gnonogram_view* self);
static gchar* gnonogram_view_get_info_item (Gnonogram_view* self, GtkLabel* l);
void gnonogram_view_set_score_label (Gnonogram_view* self, const gchar* score);
gchar* gnonogram_view_get_score (Gnonogram_view* self);
void gnonogram_view_set_size (Gnonogram_view* self, gint r, gint c);
gdouble gnonogram_view_get_grade_spin_value (Gnonogram_view* self);
GType game_state_get_type (void) G_GNUC_CONST;
void gnonogram_view_state_has_changed (Gnonogram_view* self, GameState gs);
static void gnonogram_view_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static gpointer _gnonogram_controller_ref0 (gpointer self) {
	return self ? gnonogram_controller_ref (self) : NULL;
}


static gboolean _lambda0_ (Gnonogram_view* self) {
	gboolean result = FALSE;
	g_signal_emit_by_name (self, "quitgamesignal");
	result = TRUE;
	return result;
}


static gboolean __lambda0__gtk_widget_delete_event (GtkWidget* _sender, GdkEvent* event, gpointer self) {
	gboolean result;
	result = _lambda0_ (self);
	return result;
}


Gnonogram_view* gnonogram_view_construct (GType object_type, Gnonogram_LabelBox* rb, Gnonogram_LabelBox* cb, Gnonogram_CellGrid* dg, Gnonogram_controller* controller) {
	Gnonogram_view * self = NULL;
	Gnonogram_controller* _tmp0_;
	Gnonogram_controller* _tmp1_;
	GtkFrame* _tmp2_ = NULL;
	GtkFrame* info_frame;
	GtkVBox* _tmp3_ = NULL;
	GtkVBox* info_box;
	GtkLabel* _tmp4_ = NULL;
	GtkLabel* _tmp5_;
	const gchar* _tmp6_ = NULL;
	GtkLabel* _tmp7_ = NULL;
	GtkLabel* _tmp8_;
	const gchar* _tmp9_ = NULL;
	GtkLabel* _tmp10_ = NULL;
	GtkLabel* _tmp11_;
	gchar* _tmp12_ = NULL;
	gchar* _tmp13_;
	GtkLabel* _tmp14_ = NULL;
	GtkLabel* _tmp15_;
	GtkLabel* _tmp16_ = NULL;
	GtkLabel* _tmp17_;
	GtkTable* _tmp18_ = NULL;
	GtkTable* table;
	GtkAttachOptions ao;
	GtkVBox* _tmp19_ = NULL;
	GtkVBox* vbox;
	GtkMenuBar* _tmp20_ = NULL;
	GtkMenuBar* _tmp21_;
	g_return_val_if_fail (IS_GNONOGRAM_LABELBOX (rb), NULL);
	g_return_val_if_fail (IS_GNONOGRAM_LABELBOX (cb), NULL);
	g_return_val_if_fail (IS_GNONOGRAM_CELLGRID (dg), NULL);
	g_return_val_if_fail (IS_GNONOGRAM_CONTROLLER (controller), NULL);
	self = (Gnonogram_view*) g_object_new (object_type, NULL);
	_tmp0_ = _gnonogram_controller_ref0 (controller);
	_tmp1_ = _tmp0_;
	_gnonogram_controller_unref0 (self->priv->_controller);
	self->priv->_controller = _tmp1_;
	g_signal_connect_object (GTK_WIDGET (self), "delete-event", (GCallback) __lambda0__gtk_widget_delete_event, self, 0);
	_tmp2_ = (GtkFrame*) gtk_frame_new (NULL);
	info_frame = g_object_ref_sink (_tmp2_);
	_tmp3_ = (GtkVBox*) gtk_vbox_new (FALSE, 0);
	info_box = g_object_ref_sink (_tmp3_);
	_tmp4_ = (GtkLabel*) gtk_label_new ("");
	_tmp5_ = g_object_ref_sink (_tmp4_);
	_g_object_unref0 (self->priv->_name_label);
	self->priv->_name_label = _tmp5_;
	_tmp6_ = _ ("New Game");
	gnonogram_view_set_name (self, _tmp6_);
	gtk_misc_set_alignment (GTK_MISC (self->priv->_name_label), (gfloat) 0.0, (gfloat) 0.5);
	_tmp7_ = (GtkLabel*) gtk_label_new ("");
	_tmp8_ = g_object_ref_sink (_tmp7_);
	_g_object_unref0 (self->priv->_author_label);
	self->priv->_author_label = _tmp8_;
	_tmp9_ = _ ("Unknown");
	gnonogram_view_set_author (self, _tmp9_);
	gtk_misc_set_alignment (GTK_MISC (self->priv->_author_label), (gfloat) 0.0, (gfloat) 0.5);
	_tmp10_ = (GtkLabel*) gtk_label_new ("");
	_tmp11_ = g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->_date_label);
	self->priv->_date_label = _tmp11_;
	_tmp12_ = utils_get_todays_date_string ();
	_tmp13_ = _tmp12_;
	gnonogram_view_set_date (self, _tmp13_);
	_g_free0 (_tmp13_);
	gtk_misc_set_alignment (GTK_MISC (self->priv->_date_label), (gfloat) 0.0, (gfloat) 0.5);
	_tmp14_ = (GtkLabel*) gtk_label_new ("        ");
	_tmp15_ = g_object_ref_sink (_tmp14_);
	_g_object_unref0 (self->priv->_size_label);
	self->priv->_size_label = _tmp15_;
	gtk_misc_set_alignment (GTK_MISC (self->priv->_size_label), (gfloat) 0.0, (gfloat) 0.5);
	_tmp16_ = (GtkLabel*) gtk_label_new ("       ");
	_tmp17_ = g_object_ref_sink (_tmp16_);
	_g_object_unref0 (self->priv->_score_label);
	self->priv->_score_label = _tmp17_;
	gtk_misc_set_alignment (GTK_MISC (self->priv->_score_label), (gfloat) 0.0, (gfloat) 0.5);
	gtk_container_add (GTK_CONTAINER (info_box), GTK_WIDGET (self->priv->_name_label));
	gtk_container_add (GTK_CONTAINER (info_box), GTK_WIDGET (self->priv->_author_label));
	gtk_container_add (GTK_CONTAINER (info_box), GTK_WIDGET (self->priv->_date_label));
	gtk_container_add (GTK_CONTAINER (info_box), GTK_WIDGET (self->priv->_size_label));
	gtk_container_add (GTK_CONTAINER (info_box), GTK_WIDGET (self->priv->_score_label));
	gtk_container_add (GTK_CONTAINER (info_frame), GTK_WIDGET (info_box));
	_tmp18_ = (GtkTable*) gtk_table_new ((guint) 2, (guint) 2, FALSE);
	table = g_object_ref_sink (_tmp18_);
	ao = GTK_FILL | GTK_EXPAND;
	gtk_table_attach (table, GTK_WIDGET (info_frame), (guint) 0, (guint) 1, (guint) 0, (guint) 1, GTK_SHRINK, GTK_SHRINK, (guint) 0, (guint) 0);
	gtk_table_attach (table, GTK_WIDGET (rb), (guint) 0, (guint) 1, (guint) 1, (guint) 2, ao, ao, (guint) 0, (guint) 0);
	gtk_table_attach (table, GTK_WIDGET (cb), (guint) 1, (guint) 2, (guint) 0, (guint) 1, ao, ao, (guint) 0, (guint) 0);
	gtk_table_attach (table, GTK_WIDGET (dg), (guint) 1, (guint) 2, (guint) 1, (guint) 2, ao, ao, (guint) 0, (guint) 0);
	gnonogram_view_create_viewer_toolbar (self);
	_tmp19_ = (GtkVBox*) gtk_vbox_new (FALSE, 0);
	vbox = g_object_ref_sink (_tmp19_);
	_tmp20_ = gnonogram_view_create_viewer_menubar (self);
	_tmp21_ = _tmp20_;
	gtk_box_pack_start (GTK_BOX (vbox), GTK_WIDGET (_tmp21_), FALSE, FALSE, (guint) 0);
	_g_object_unref0 (_tmp21_);
	gtk_box_pack_start (GTK_BOX (vbox), GTK_WIDGET (self->_toolbar), FALSE, FALSE, (guint) 0);
	gtk_box_pack_start (GTK_BOX (vbox), GTK_WIDGET (table), TRUE, TRUE, (guint) 0);
	gtk_container_add (GTK_CONTAINER (self), GTK_WIDGET (vbox));
	_g_object_unref0 (vbox);
	_g_object_unref0 (table);
	_g_object_unref0 (info_box);
	_g_object_unref0 (info_frame);
	return self;
}


Gnonogram_view* gnonogram_view_new (Gnonogram_LabelBox* rb, Gnonogram_LabelBox* cb, Gnonogram_CellGrid* dg, Gnonogram_controller* controller) {
	return gnonogram_view_construct (TYPE_GNONOGRAM_VIEW, rb, cb, dg, controller);
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void block1_data_unref (Block1Data* _data1_) {
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		_g_object_unref0 (_data1_->self);
		_g_object_unref0 (_data1_->difficultmenuitem);
		_g_object_unref0 (_data1_->advancedmenuitem);
		g_slice_free (Block1Data, _data1_);
	}
}


static void _lambda14_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "newgame");
}


static void __lambda14__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda14_ (self);
}


static void _lambda15_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "loadgame", "");
}


static void __lambda15__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda15_ (self);
}


static void _lambda16_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "savegame");
}


static void __lambda16__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda16_ (self);
}


static void _lambda17_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "savepictogame");
}


static void __lambda17__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda17_ (self);
}


static void _lambda18_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "loadposition");
}


static void __lambda18__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda18_ (self);
}


static void _lambda19_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "saveposition");
}


static void __lambda19__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda19_ (self);
}


static void _lambda20_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "quitgamesignal");
}


static void __lambda20__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda20_ (self);
}


static void _lambda21_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "revealgame");
}


static void __lambda21__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda21_ (self);
}


static void _lambda22_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "hidegame");
}


static void __lambda22__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda22_ (self);
}


static void _lambda23_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "checkerrors");
}


static void __lambda23__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda23_ (self);
}


static void _lambda24_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "restartgame");
}


static void __lambda24__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda24_ (self);
}


static void _lambda25_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "solvegame");
}


static void __lambda25__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda25_ (self);
}


static void _lambda26_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "randomgame");
}


static void __lambda26__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda26_ (self);
}


static void _lambda27_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "setcolors");
}


static void __lambda27__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda27_ (self);
}


static void _lambda28_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "setfont");
}


static void __lambda28__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda28_ (self);
}


static void _lambda29_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "resizegame");
}


static void __lambda29__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda29_ (self);
}


static void _gnonogram_view_getdifficulty_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	gnonogram_view_getdifficulty (self);
}


static void _gnonogram_view_editdescription_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	gnonogram_view_editdescription (self);
}


static void _lambda30_ (Block1Data* _data1_) {
	Gnonogram_view * self;
	gboolean _tmp0_;
	self = _data1_->self;
	_tmp0_ = gtk_check_menu_item_get_active (_data1_->advancedmenuitem);
	g_signal_emit_by_name (self, "advancedmode", _tmp0_);
}


static void __lambda30__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda30_ (self);
}


static void _lambda31_ (Block1Data* _data1_) {
	Gnonogram_view * self;
	gboolean _tmp0_;
	self = _data1_->self;
	_tmp0_ = gtk_check_menu_item_get_active (_data1_->difficultmenuitem);
	g_signal_emit_by_name (self, "difficultmode", _tmp0_);
}


static void __lambda31__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda31_ (self);
}


static void _gnonogram_view_toggle_toolbar_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	gnonogram_view_toggle_toolbar (self, _sender);
}


static void _lambda32_ (Gnonogram_view* self) {
	gboolean _tmp0_;
	_tmp0_ = gtk_check_menu_item_get_active (self->priv->_gridmenuitem);
	g_signal_emit_by_name (self, "togglegrid", _tmp0_);
}


static void __lambda32__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	_lambda32_ (self);
}


static void _gnonogram_view_show_about_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	gnonogram_view_show_about (self);
}


static void _gnonogram_view_show_manual_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	gnonogram_view_show_manual (self);
}


static GtkMenuBar* gnonogram_view_create_viewer_menubar (Gnonogram_view* self) {
	GtkMenuBar* result = NULL;
	Block1Data* _data1_;
	GtkMenuBar* _tmp0_ = NULL;
	GtkMenuBar* menubar;
	const gchar* _tmp1_ = NULL;
	GtkMenuItem* _tmp2_ = NULL;
	GtkMenuItem* filemenuitem;
	const gchar* _tmp3_ = NULL;
	GtkMenuItem* _tmp4_ = NULL;
	GtkMenuItem* gamemenuitem;
	const gchar* _tmp5_ = NULL;
	GtkMenuItem* _tmp6_ = NULL;
	GtkMenuItem* settingsmenuitem;
	const gchar* _tmp7_ = NULL;
	GtkMenuItem* _tmp8_ = NULL;
	GtkMenuItem* viewmenuitem;
	const gchar* _tmp9_ = NULL;
	GtkMenuItem* _tmp10_ = NULL;
	GtkMenuItem* helpmenuitem;
	GtkMenu* _tmp11_ = NULL;
	GtkMenu* filesubmenu;
	const gchar* _tmp12_ = NULL;
	GtkMenuItem* _tmp13_ = NULL;
	GtkMenuItem* newmenuitem;
	GtkSeparatorMenuItem* _tmp14_ = NULL;
	GtkSeparatorMenuItem* _tmp15_;
	const gchar* _tmp16_ = NULL;
	GtkMenuItem* _tmp17_ = NULL;
	GtkMenuItem* loadmenuitem;
	const gchar* _tmp18_ = NULL;
	GtkMenuItem* _tmp19_ = NULL;
	GtkMenuItem* savemenuitem;
	const gchar* _tmp20_ = NULL;
	GtkMenuItem* _tmp21_ = NULL;
	GtkMenuItem* savepictomenuitem;
	GtkSeparatorMenuItem* _tmp22_ = NULL;
	GtkSeparatorMenuItem* _tmp23_;
	const gchar* _tmp24_ = NULL;
	GtkMenuItem* _tmp25_ = NULL;
	GtkMenuItem* quitmenuitem;
	GtkMenu* _tmp26_ = NULL;
	GtkMenu* loadsubmenu;
	const gchar* _tmp27_ = NULL;
	GtkMenuItem* _tmp28_ = NULL;
	GtkMenuItem* loadpuzzlemenuitem;
	const gchar* _tmp29_ = NULL;
	GtkMenuItem* _tmp30_ = NULL;
	GtkMenuItem* loadpositionmenuitem;
	GtkMenu* _tmp31_ = NULL;
	GtkMenu* savesubmenu;
	const gchar* _tmp32_ = NULL;
	GtkMenuItem* _tmp33_ = NULL;
	GtkMenuItem* savepuzzlemenuitem;
	const gchar* _tmp34_ = NULL;
	GtkMenuItem* _tmp35_ = NULL;
	GtkMenuItem* savepositionmenuitem;
	GtkMenu* _tmp36_ = NULL;
	GtkMenu* gamesubmenu;
	const gchar* _tmp37_ = NULL;
	GtkMenuItem* _tmp38_ = NULL;
	GtkMenuItem* _tmp39_;
	const gchar* _tmp40_ = NULL;
	GtkMenuItem* _tmp41_ = NULL;
	GtkMenuItem* _tmp42_;
	const gchar* _tmp43_ = NULL;
	GtkMenuItem* _tmp44_ = NULL;
	GtkMenuItem* _tmp45_;
	const gchar* _tmp46_ = NULL;
	GtkMenuItem* _tmp47_ = NULL;
	GtkMenuItem* restartmenuitem;
	GtkSeparatorMenuItem* _tmp48_ = NULL;
	GtkSeparatorMenuItem* _tmp49_;
	const gchar* _tmp50_ = NULL;
	GtkMenuItem* _tmp51_ = NULL;
	GtkMenuItem* computersolvemenuitem;
	const gchar* _tmp52_ = NULL;
	GtkMenuItem* _tmp53_ = NULL;
	GtkMenuItem* computergeneratemenuitem;
	GtkSeparatorMenuItem* _tmp54_ = NULL;
	GtkSeparatorMenuItem* _tmp55_;
	const gchar* _tmp56_ = NULL;
	GtkMenuItem* _tmp57_ = NULL;
	GtkMenuItem* infomenuitem;
	GtkMenu* _tmp58_ = NULL;
	GtkMenu* settingssubmenu;
	const gchar* _tmp59_ = NULL;
	GtkMenuItem* _tmp60_ = NULL;
	GtkMenuItem* colormenuitem;
	const gchar* _tmp61_ = NULL;
	GtkMenuItem* _tmp62_ = NULL;
	GtkMenuItem* fontmenuitem;
	const gchar* _tmp63_ = NULL;
	GtkMenuItem* _tmp64_ = NULL;
	GtkMenuItem* resizemenuitem;
	const gchar* _tmp65_ = NULL;
	GtkMenuItem* _tmp66_ = NULL;
	GtkMenuItem* _tmp67_;
	GtkSeparatorMenuItem* _tmp68_ = NULL;
	GtkSeparatorMenuItem* _tmp69_;
	const gchar* _tmp70_ = NULL;
	GtkCheckMenuItem* _tmp71_ = NULL;
	const gchar* _tmp72_ = NULL;
	GtkCheckMenuItem* _tmp73_ = NULL;
	GtkMenu* _tmp74_ = NULL;
	GtkMenu* viewsubmenu;
	const gchar* _tmp75_ = NULL;
	GtkCheckMenuItem* _tmp76_ = NULL;
	GtkCheckMenuItem* toolbarmenuitem;
	const gchar* _tmp77_ = NULL;
	GtkCheckMenuItem* _tmp78_ = NULL;
	GtkCheckMenuItem* _tmp79_;
	GtkMenu* _tmp80_ = NULL;
	GtkMenu* helpsubmenu;
	const gchar* _tmp81_ = NULL;
	GtkMenuItem* _tmp82_ = NULL;
	GtkMenuItem* aboutmenuitem;
	const gchar* _tmp83_ = NULL;
	GtkMenuItem* _tmp84_ = NULL;
	GtkMenuItem* manualmenuitem;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	_data1_ = g_slice_new0 (Block1Data);
	_data1_->_ref_count_ = 1;
	_data1_->self = g_object_ref (self);
	_tmp0_ = (GtkMenuBar*) gtk_menu_bar_new ();
	menubar = g_object_ref_sink (_tmp0_);
	_tmp1_ = _ ("_File");
	_tmp2_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp1_);
	filemenuitem = g_object_ref_sink (_tmp2_);
	_tmp3_ = _ ("_Game");
	_tmp4_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp3_);
	gamemenuitem = g_object_ref_sink (_tmp4_);
	_tmp5_ = _ ("_Settings");
	_tmp6_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp5_);
	settingsmenuitem = g_object_ref_sink (_tmp6_);
	_tmp7_ = _ ("_View");
	_tmp8_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp7_);
	viewmenuitem = g_object_ref_sink (_tmp8_);
	_tmp9_ = _ ("_Help");
	_tmp10_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp9_);
	helpmenuitem = g_object_ref_sink (_tmp10_);
	gtk_menu_shell_append (GTK_MENU_SHELL (menubar), (GtkWidget*) filemenuitem);
	gtk_menu_shell_append (GTK_MENU_SHELL (menubar), (GtkWidget*) gamemenuitem);
	gtk_menu_shell_append (GTK_MENU_SHELL (menubar), (GtkWidget*) settingsmenuitem);
	gtk_menu_shell_append (GTK_MENU_SHELL (menubar), (GtkWidget*) viewmenuitem);
	gtk_menu_shell_append (GTK_MENU_SHELL (menubar), (GtkWidget*) helpmenuitem);
	_tmp11_ = (GtkMenu*) gtk_menu_new ();
	filesubmenu = g_object_ref_sink (_tmp11_);
	gtk_menu_item_set_submenu (filemenuitem, GTK_WIDGET (filesubmenu));
	_tmp12_ = _ ("_New");
	_tmp13_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp12_);
	newmenuitem = g_object_ref_sink (_tmp13_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (newmenuitem));
	_tmp14_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	_tmp15_ = g_object_ref_sink (_tmp14_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (_tmp15_));
	_g_object_unref0 (_tmp15_);
	_tmp16_ = _ ("_Load");
	_tmp17_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp16_);
	loadmenuitem = g_object_ref_sink (_tmp17_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (loadmenuitem));
	_tmp18_ = _ ("_Save");
	_tmp19_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp18_);
	savemenuitem = g_object_ref_sink (_tmp19_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (savemenuitem));
	_tmp20_ = _ ("_Save as Pictogame");
	_tmp21_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp20_);
	savepictomenuitem = g_object_ref_sink (_tmp21_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (savepictomenuitem));
	_tmp22_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	_tmp23_ = g_object_ref_sink (_tmp22_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (_tmp23_));
	_g_object_unref0 (_tmp23_);
	_tmp24_ = _ ("_Quit");
	_tmp25_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp24_);
	quitmenuitem = g_object_ref_sink (_tmp25_);
	gtk_container_add (GTK_CONTAINER (filesubmenu), GTK_WIDGET (quitmenuitem));
	_tmp26_ = (GtkMenu*) gtk_menu_new ();
	loadsubmenu = g_object_ref_sink (_tmp26_);
	gtk_menu_item_set_submenu (loadmenuitem, GTK_WIDGET (loadsubmenu));
	_tmp27_ = _ ("_Puzzle");
	_tmp28_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp27_);
	loadpuzzlemenuitem = g_object_ref_sink (_tmp28_);
	gtk_container_add (GTK_CONTAINER (loadsubmenu), GTK_WIDGET (loadpuzzlemenuitem));
	_tmp29_ = _ ("_Unfinished");
	_tmp30_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp29_);
	loadpositionmenuitem = g_object_ref_sink (_tmp30_);
	gtk_container_add (GTK_CONTAINER (loadsubmenu), GTK_WIDGET (loadpositionmenuitem));
	_tmp31_ = (GtkMenu*) gtk_menu_new ();
	savesubmenu = g_object_ref_sink (_tmp31_);
	gtk_menu_item_set_submenu (savemenuitem, GTK_WIDGET (savesubmenu));
	_tmp32_ = _ ("_Puzzle");
	_tmp33_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp32_);
	savepuzzlemenuitem = g_object_ref_sink (_tmp33_);
	gtk_container_add (GTK_CONTAINER (savesubmenu), GTK_WIDGET (savepuzzlemenuitem));
	_tmp34_ = _ ("_Unfinished");
	_tmp35_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp34_);
	savepositionmenuitem = g_object_ref_sink (_tmp35_);
	gtk_container_add (GTK_CONTAINER (savesubmenu), GTK_WIDGET (savepositionmenuitem));
	_tmp36_ = (GtkMenu*) gtk_menu_new ();
	gamesubmenu = g_object_ref_sink (_tmp36_);
	gtk_menu_item_set_submenu (gamemenuitem, GTK_WIDGET (gamesubmenu));
	_tmp37_ = _ ("_Show solution");
	_tmp38_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp37_);
	_tmp39_ = g_object_ref_sink (_tmp38_);
	_g_object_unref0 (self->priv->_showsolutionmenuitem);
	self->priv->_showsolutionmenuitem = _tmp39_;
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (self->priv->_showsolutionmenuitem));
	_tmp40_ = _ ("Show _Working");
	_tmp41_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp40_);
	_tmp42_ = g_object_ref_sink (_tmp41_);
	_g_object_unref0 (self->priv->_showworkingmenuitem);
	self->priv->_showworkingmenuitem = _tmp42_;
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (self->priv->_showworkingmenuitem));
	_tmp43_ = _ ("Show _Incorrect cells");
	_tmp44_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp43_);
	_tmp45_ = g_object_ref_sink (_tmp44_);
	_g_object_unref0 (self->priv->_checkerrorsmenuitem);
	self->priv->_checkerrorsmenuitem = _tmp45_;
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (self->priv->_checkerrorsmenuitem));
	gtk_widget_set_sensitive (GTK_WIDGET (self->priv->_checkerrorsmenuitem), FALSE);
	_tmp46_ = _ ("_Restart");
	_tmp47_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp46_);
	restartmenuitem = g_object_ref_sink (_tmp47_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (restartmenuitem));
	_tmp48_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	_tmp49_ = g_object_ref_sink (_tmp48_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (_tmp49_));
	_g_object_unref0 (_tmp49_);
	_tmp50_ = _ ("_Let computer solve it");
	_tmp51_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp50_);
	computersolvemenuitem = g_object_ref_sink (_tmp51_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (computersolvemenuitem));
	_tmp52_ = _ ("_Computer generated puzzle");
	_tmp53_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp52_);
	computergeneratemenuitem = g_object_ref_sink (_tmp53_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (computergeneratemenuitem));
	_tmp54_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	_tmp55_ = g_object_ref_sink (_tmp54_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (_tmp55_));
	_g_object_unref0 (_tmp55_);
	_tmp56_ = _ ("_Edit game description");
	_tmp57_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp56_);
	infomenuitem = g_object_ref_sink (_tmp57_);
	gtk_container_add (GTK_CONTAINER (gamesubmenu), GTK_WIDGET (infomenuitem));
	_tmp58_ = (GtkMenu*) gtk_menu_new ();
	settingssubmenu = g_object_ref_sink (_tmp58_);
	gtk_menu_item_set_submenu (settingsmenuitem, GTK_WIDGET (settingssubmenu));
	_tmp59_ = _ ("_Colors ...");
	_tmp60_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp59_);
	colormenuitem = g_object_ref_sink (_tmp60_);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (colormenuitem));
	_tmp61_ = _ ("_Font ...");
	_tmp62_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp61_);
	fontmenuitem = g_object_ref_sink (_tmp62_);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (fontmenuitem));
	_tmp63_ = _ ("_Resize ...");
	_tmp64_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp63_);
	resizemenuitem = g_object_ref_sink (_tmp64_);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (resizemenuitem));
	_tmp65_ = _ ("_Difficulty ...");
	_tmp66_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp65_);
	_tmp67_ = g_object_ref_sink (_tmp66_);
	_g_object_unref0 (self->priv->grademenuitem);
	self->priv->grademenuitem = _tmp67_;
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (self->priv->grademenuitem));
	_tmp68_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	_tmp69_ = g_object_ref_sink (_tmp68_);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (_tmp69_));
	_g_object_unref0 (_tmp69_);
	_tmp70_ = _ ("_Use advanced solver");
	_tmp71_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_tmp70_);
	_data1_->advancedmenuitem = g_object_ref_sink (_tmp71_);
	gtk_check_menu_item_set_active (_data1_->advancedmenuitem, TRUE);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (_data1_->advancedmenuitem));
	_tmp72_ = _ ("_Generate difficult games");
	_tmp73_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_tmp72_);
	_data1_->difficultmenuitem = g_object_ref_sink (_tmp73_);
	gtk_check_menu_item_set_active (_data1_->difficultmenuitem, FALSE);
	gtk_container_add (GTK_CONTAINER (settingssubmenu), GTK_WIDGET (_data1_->difficultmenuitem));
	_tmp74_ = (GtkMenu*) gtk_menu_new ();
	viewsubmenu = g_object_ref_sink (_tmp74_);
	gtk_menu_item_set_submenu (viewmenuitem, GTK_WIDGET (viewsubmenu));
	_tmp75_ = _ ("_Toolbar");
	_tmp76_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_tmp75_);
	toolbarmenuitem = g_object_ref_sink (_tmp76_);
	gtk_container_add (GTK_CONTAINER (viewsubmenu), GTK_WIDGET (toolbarmenuitem));
	gtk_check_menu_item_set_active (toolbarmenuitem, TRUE);
	_tmp77_ = _ ("_Grid");
	_tmp78_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_mnemonic (_tmp77_);
	_tmp79_ = g_object_ref_sink (_tmp78_);
	_g_object_unref0 (self->priv->_gridmenuitem);
	self->priv->_gridmenuitem = _tmp79_;
	gtk_container_add (GTK_CONTAINER (viewsubmenu), GTK_WIDGET (self->priv->_gridmenuitem));
	gtk_check_menu_item_set_active (self->priv->_gridmenuitem, FALSE);
	_tmp80_ = (GtkMenu*) gtk_menu_new ();
	helpsubmenu = g_object_ref_sink (_tmp80_);
	gtk_menu_item_set_submenu (helpmenuitem, GTK_WIDGET (helpsubmenu));
	_tmp81_ = _ ("About");
	_tmp82_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp81_);
	aboutmenuitem = g_object_ref_sink (_tmp82_);
	gtk_container_add (GTK_CONTAINER (helpsubmenu), GTK_WIDGET (aboutmenuitem));
	_tmp83_ = _ ("Manual");
	_tmp84_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp83_);
	manualmenuitem = g_object_ref_sink (_tmp84_);
	gtk_container_add (GTK_CONTAINER (helpsubmenu), GTK_WIDGET (manualmenuitem));
	g_signal_connect_object (newmenuitem, "activate", (GCallback) __lambda14__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (loadpuzzlemenuitem, "activate", (GCallback) __lambda15__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (savepuzzlemenuitem, "activate", (GCallback) __lambda16__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (savepictomenuitem, "activate", (GCallback) __lambda17__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (loadpositionmenuitem, "activate", (GCallback) __lambda18__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (savepositionmenuitem, "activate", (GCallback) __lambda19__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (quitmenuitem, "activate", (GCallback) __lambda20__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (self->priv->_showsolutionmenuitem, "activate", (GCallback) __lambda21__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (self->priv->_showworkingmenuitem, "activate", (GCallback) __lambda22__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (self->priv->_checkerrorsmenuitem, "activate", (GCallback) __lambda23__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (restartmenuitem, "activate", (GCallback) __lambda24__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (computersolvemenuitem, "activate", (GCallback) __lambda25__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (computergeneratemenuitem, "activate", (GCallback) __lambda26__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (colormenuitem, "activate", (GCallback) __lambda27__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (fontmenuitem, "activate", (GCallback) __lambda28__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (resizemenuitem, "activate", (GCallback) __lambda29__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (self->priv->grademenuitem, "activate", (GCallback) _gnonogram_view_getdifficulty_gtk_menu_item_activate, self, 0);
	g_signal_connect_object (infomenuitem, "activate", (GCallback) _gnonogram_view_editdescription_gtk_menu_item_activate, self, 0);
	g_signal_connect_data (GTK_MENU_ITEM (_data1_->advancedmenuitem), "activate", (GCallback) __lambda30__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	g_signal_connect_data (GTK_MENU_ITEM (_data1_->difficultmenuitem), "activate", (GCallback) __lambda31__gtk_menu_item_activate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	g_signal_connect_object (GTK_MENU_ITEM (toolbarmenuitem), "activate", (GCallback) _gnonogram_view_toggle_toolbar_gtk_menu_item_activate, self, 0);
	g_signal_connect_object (GTK_MENU_ITEM (self->priv->_gridmenuitem), "activate", (GCallback) __lambda32__gtk_menu_item_activate, self, 0);
	g_signal_connect_object (aboutmenuitem, "activate", (GCallback) _gnonogram_view_show_about_gtk_menu_item_activate, self, 0);
	g_signal_connect_object (manualmenuitem, "activate", (GCallback) _gnonogram_view_show_manual_gtk_menu_item_activate, self, 0);
	result = menubar;
	_g_object_unref0 (manualmenuitem);
	_g_object_unref0 (aboutmenuitem);
	_g_object_unref0 (helpsubmenu);
	_g_object_unref0 (toolbarmenuitem);
	_g_object_unref0 (viewsubmenu);
	_g_object_unref0 (resizemenuitem);
	_g_object_unref0 (fontmenuitem);
	_g_object_unref0 (colormenuitem);
	_g_object_unref0 (settingssubmenu);
	_g_object_unref0 (infomenuitem);
	_g_object_unref0 (computergeneratemenuitem);
	_g_object_unref0 (computersolvemenuitem);
	_g_object_unref0 (restartmenuitem);
	_g_object_unref0 (gamesubmenu);
	_g_object_unref0 (savepositionmenuitem);
	_g_object_unref0 (savepuzzlemenuitem);
	_g_object_unref0 (savesubmenu);
	_g_object_unref0 (loadpositionmenuitem);
	_g_object_unref0 (loadpuzzlemenuitem);
	_g_object_unref0 (loadsubmenu);
	_g_object_unref0 (quitmenuitem);
	_g_object_unref0 (savepictomenuitem);
	_g_object_unref0 (savemenuitem);
	_g_object_unref0 (loadmenuitem);
	_g_object_unref0 (newmenuitem);
	_g_object_unref0 (filesubmenu);
	_g_object_unref0 (helpmenuitem);
	_g_object_unref0 (viewmenuitem);
	_g_object_unref0 (settingsmenuitem);
	_g_object_unref0 (gamemenuitem);
	_g_object_unref0 (filemenuitem);
	block1_data_unref (_data1_);
	_data1_ = NULL;
	return result;
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void block2_data_unref (Block2Data* _data2_) {
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		_g_object_unref0 (_data2_->self);
		_g_object_unref0 (_data2_->grade_tool);
		g_slice_free (Block2Data, _data2_);
	}
}


static void _lambda1_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "newgame");
}


static void __lambda1__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda1_ (self);
}


static void _lambda2_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "savegame");
}


static void __lambda2__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda2_ (self);
}


static void _lambda3_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "loadgame", "");
}


static void __lambda3__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda3_ (self);
}


static void _gnonogram_view_toggle_execute_gtk_toggle_tool_button_toggled (GtkToggleToolButton* _sender, gpointer self) {
	gnonogram_view_toggle_execute (self);
}


static void _lambda4_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "checkerrors");
}


static void __lambda4__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda4_ (self);
}


static void _lambda5_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "restartgame");
}


static void __lambda5__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda5_ (self);
}


static void _lambda6_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "solvegame");
}


static void __lambda6__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda6_ (self);
}


static void _lambda7_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "randomgame");
}


static void __lambda7__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda7_ (self);
}


static void _lambda8_ (GtkSpinButton* sb, Gnonogram_view* self) {
	gdouble _tmp0_;
	g_return_if_fail (GTK_IS_SPIN_BUTTON (sb));
	_tmp0_ = gtk_spin_button_get_value (sb);
	g_signal_emit_by_name (self, "setdifficulty", _tmp0_);
}


static void __lambda8__gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self) {
	_lambda8_ (_sender, self);
}


static gboolean _lambda9_ (Block2Data* _data2_) {
	Gnonogram_view * self;
	gboolean result = FALSE;
	const gchar* _tmp0_ = NULL;
	GtkMenuItem* _tmp1_ = NULL;
	GtkMenuItem* grademenuitem2;
	const gchar* _tmp2_ = NULL;
	self = _data2_->self;
	_tmp0_ = _ ("_Difficulty");
	_tmp1_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp0_);
	grademenuitem2 = g_object_ref_sink (_tmp1_);
	g_signal_connect_object (grademenuitem2, "activate", (GCallback) _gnonogram_view_getdifficulty_gtk_menu_item_activate, self, 0);
	_tmp2_ = _ ("Difficulty");
	gtk_tool_item_set_proxy_menu_item (_data2_->grade_tool, _tmp2_, GTK_WIDGET (grademenuitem2));
	result = TRUE;
	_g_object_unref0 (grademenuitem2);
	return result;
}


static gboolean __lambda9__gtk_tool_item_create_menu_proxy (GtkToolItem* _sender, gpointer self) {
	gboolean result;
	result = _lambda9_ (self);
	return result;
}


static void _lambda11_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "resizegame");
}


static void __lambda11__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda11_ (self);
}


static void _lambda12_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "changefont", TRUE);
}


static void __lambda12__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda12_ (self);
}


static void _lambda13_ (Gnonogram_view* self) {
	g_signal_emit_by_name (self, "changefont", FALSE);
}


static void __lambda13__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_lambda13_ (self);
}


static void gnonogram_view_create_viewer_toolbar (Gnonogram_view* self) {
	Block2Data* _data2_;
	GtkToolbar* _tmp0_ = NULL;
	GtkToolbar* _tmp1_;
	GtkToolButton* _tmp2_ = NULL;
	GtkToolButton* new_tool;
	const gchar* _tmp3_ = NULL;
	GtkToolButton* _tmp4_ = NULL;
	GtkToolButton* load_tool;
	const gchar* _tmp5_ = NULL;
	GtkToolButton* _tmp6_ = NULL;
	GtkToolButton* save_as_tool;
	const gchar* _tmp7_ = NULL;
	GtkSeparatorToolItem* _tmp8_ = NULL;
	GtkSeparatorToolItem* _tmp9_;
	GtkToggleToolButton* _tmp10_ = NULL;
	GtkToggleToolButton* _tmp11_;
	const gchar* _tmp12_ = NULL;
	gchar* _tmp13_;
	GtkImage* _tmp14_ = NULL;
	GtkImage* _tmp15_;
	GtkImage* peek_icon;
	const gchar* _tmp16_ = NULL;
	GtkToolButton* _tmp17_ = NULL;
	GtkToolButton* _tmp18_;
	const gchar* _tmp19_ = NULL;
	GtkToolButton* _tmp20_ = NULL;
	GtkToolButton* restart_tool;
	const gchar* _tmp21_ = NULL;
	gchar* _tmp22_;
	GtkImage* _tmp23_ = NULL;
	GtkImage* _tmp24_;
	GtkImage* solve_icon;
	const gchar* _tmp25_ = NULL;
	GtkToolButton* _tmp26_ = NULL;
	GtkToolButton* solve_tool;
	const gchar* _tmp27_ = NULL;
	gchar* _tmp28_;
	GtkImage* _tmp29_ = NULL;
	GtkImage* _tmp30_;
	GtkImage* random_icon;
	const gchar* _tmp31_ = NULL;
	GtkToolButton* _tmp32_ = NULL;
	GtkToolButton* random_tool;
	const gchar* _tmp33_ = NULL;
	GtkSeparatorToolItem* _tmp34_ = NULL;
	GtkSeparatorToolItem* _tmp35_;
	GtkToolItem* _tmp36_ = NULL;
	GtkSpinButton* _tmp37_ = NULL;
	GtkSpinButton* _tmp38_;
	const gchar* _tmp39_ = NULL;
	gchar* _tmp40_;
	GtkImage* _tmp41_ = NULL;
	GtkImage* _tmp42_;
	GtkImage* resize_icon;
	const gchar* _tmp43_ = NULL;
	GtkToolButton* _tmp44_ = NULL;
	GtkToolButton* resize_tool;
	const gchar* _tmp45_ = NULL;
	GtkToolButton* _tmp46_ = NULL;
	GtkToolButton* zoom_in_tool;
	const gchar* _tmp47_ = NULL;
	GtkToolButton* _tmp48_ = NULL;
	GtkToolButton* zoom_out_tool;
	const gchar* _tmp49_ = NULL;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_data2_ = g_slice_new0 (Block2Data);
	_data2_->_ref_count_ = 1;
	_data2_->self = g_object_ref (self);
	_tmp0_ = (GtkToolbar*) gtk_toolbar_new ();
	_tmp1_ = g_object_ref_sink (_tmp0_);
	_g_object_unref0 (self->_toolbar);
	self->_toolbar = _tmp1_;
	gtk_toolbar_set_style (self->_toolbar, GTK_TOOLBAR_ICONS);
	_tmp2_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_CLEAR);
	new_tool = g_object_ref_sink (_tmp2_);
	_tmp3_ = _ ("New game");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (new_tool), _tmp3_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (new_tool));
	_tmp4_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_OPEN);
	load_tool = g_object_ref_sink (_tmp4_);
	_tmp5_ = _ ("Load game");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (load_tool), _tmp5_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (load_tool));
	_tmp6_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_SAVE_AS);
	save_as_tool = g_object_ref_sink (_tmp6_);
	_tmp7_ = _ ("Save game");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (save_as_tool), _tmp7_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (save_as_tool));
	_tmp8_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	_tmp9_ = g_object_ref_sink (_tmp8_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (_tmp9_));
	_g_object_unref0 (_tmp9_);
	_tmp10_ = (GtkToggleToolButton*) gtk_toggle_tool_button_new_from_stock (GTK_STOCK_EXECUTE);
	_tmp11_ = g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->_hide_tool);
	self->priv->_hide_tool = _tmp11_;
	_tmp12_ = _ ("Hide the solution and start solving");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (self->priv->_hide_tool), _tmp12_);
	gtk_toggle_tool_button_set_active (self->priv->_hide_tool, FALSE);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (self->priv->_hide_tool));
	_tmp13_ = g_strconcat (resource_icon_dir, "/eyeballs.png", NULL);
	_tmp14_ = (GtkImage*) gtk_image_new_from_file (_tmp13_);
	peek_icon = (_tmp15_ = g_object_ref_sink (_tmp14_), _g_free0 (_tmp13_), _tmp15_);
	_tmp16_ = _ ("Check");
	_tmp17_ = (GtkToolButton*) gtk_tool_button_new (GTK_WIDGET (peek_icon), _tmp16_);
	_tmp18_ = g_object_ref_sink (_tmp17_);
	_g_object_unref0 (self->priv->_check_tool);
	self->priv->_check_tool = _tmp18_;
	_tmp19_ = _ ("Show any incorrect cells");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (self->priv->_check_tool), _tmp19_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (self->priv->_check_tool));
	_tmp20_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_REFRESH);
	restart_tool = g_object_ref_sink (_tmp20_);
	_tmp21_ = _ ("Start this puzzle again");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (restart_tool), _tmp21_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (restart_tool));
	_tmp22_ = g_strconcat (resource_icon_dir, "/laptop.png", NULL);
	_tmp23_ = (GtkImage*) gtk_image_new_from_file (_tmp22_);
	solve_icon = (_tmp24_ = g_object_ref_sink (_tmp23_), _g_free0 (_tmp22_), _tmp24_);
	_tmp25_ = _ ("Solve");
	_tmp26_ = (GtkToolButton*) gtk_tool_button_new (GTK_WIDGET (solve_icon), _tmp25_);
	solve_tool = g_object_ref_sink (_tmp26_);
	_tmp27_ = _ ("Solve by computer");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (solve_tool), _tmp27_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (solve_tool));
	_tmp28_ = g_strconcat (resource_icon_dir, "/Dices.png", NULL);
	_tmp29_ = (GtkImage*) gtk_image_new_from_file (_tmp28_);
	random_icon = (_tmp30_ = g_object_ref_sink (_tmp29_), _g_free0 (_tmp28_), _tmp30_);
	_tmp31_ = _ ("Random");
	_tmp32_ = (GtkToolButton*) gtk_tool_button_new (GTK_WIDGET (random_icon), _tmp31_);
	random_tool = g_object_ref_sink (_tmp32_);
	_tmp33_ = _ ("Generate a random game");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (random_tool), _tmp33_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (random_tool));
	_tmp34_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	_tmp35_ = g_object_ref_sink (_tmp34_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (_tmp35_));
	_g_object_unref0 (_tmp35_);
	_tmp36_ = gtk_tool_item_new ();
	_data2_->grade_tool = g_object_ref_sink (_tmp36_);
	_tmp37_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) 1, (gdouble) resource_MAXGRADE, (gdouble) 1);
	_tmp38_ = g_object_ref_sink (_tmp37_);
	_g_object_unref0 (self->priv->_grade_spin);
	self->priv->_grade_spin = _tmp38_;
	_tmp39_ = _ ("Set the difficulty of generated games");
	gtk_widget_set_tooltip_text (GTK_WIDGET (self->priv->_grade_spin), _tmp39_);
	gtk_widget_set_can_focus (GTK_WIDGET (self->priv->_grade_spin), FALSE);
	gtk_container_add (GTK_CONTAINER (_data2_->grade_tool), GTK_WIDGET (self->priv->_grade_spin));
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (_data2_->grade_tool));
	_tmp40_ = g_strconcat (resource_icon_dir, "/newsheet.png", NULL);
	_tmp41_ = (GtkImage*) gtk_image_new_from_file (_tmp40_);
	resize_icon = (_tmp42_ = g_object_ref_sink (_tmp41_), _g_free0 (_tmp40_), _tmp42_);
	_tmp43_ = _ ("Resize");
	_tmp44_ = (GtkToolButton*) gtk_tool_button_new (GTK_WIDGET (resize_icon), _tmp43_);
	resize_tool = g_object_ref_sink (_tmp44_);
	_tmp45_ = _ ("Change dimensions of the game grid");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (resize_tool), _tmp45_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (resize_tool));
	_tmp46_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_ZOOM_IN);
	zoom_in_tool = g_object_ref_sink (_tmp46_);
	_tmp47_ = _ ("Increase font size");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (zoom_in_tool), _tmp47_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (zoom_in_tool));
	_tmp48_ = (GtkToolButton*) gtk_tool_button_new_from_stock (GTK_STOCK_ZOOM_OUT);
	zoom_out_tool = g_object_ref_sink (_tmp48_);
	_tmp49_ = _ ("Decrease font size");
	gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (zoom_out_tool), _tmp49_);
	gtk_container_add (GTK_CONTAINER (self->_toolbar), GTK_WIDGET (zoom_out_tool));
	g_signal_connect_object (new_tool, "clicked", (GCallback) __lambda1__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (save_as_tool, "clicked", (GCallback) __lambda2__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (load_tool, "clicked", (GCallback) __lambda3__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (self->priv->_hide_tool, "toggled", (GCallback) _gnonogram_view_toggle_execute_gtk_toggle_tool_button_toggled, self, 0);
	g_signal_connect_object (self->priv->_check_tool, "clicked", (GCallback) __lambda4__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (restart_tool, "clicked", (GCallback) __lambda5__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (solve_tool, "clicked", (GCallback) __lambda6__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (random_tool, "clicked", (GCallback) __lambda7__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (self->priv->_grade_spin, "value-changed", (GCallback) __lambda8__gtk_spin_button_value_changed, self, 0);
	g_signal_connect_data (_data2_->grade_tool, "create-menu-proxy", (GCallback) __lambda9__gtk_tool_item_create_menu_proxy, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
	g_signal_connect_object (resize_tool, "clicked", (GCallback) __lambda11__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (zoom_in_tool, "clicked", (GCallback) __lambda12__gtk_tool_button_clicked, self, 0);
	g_signal_connect_object (zoom_out_tool, "clicked", (GCallback) __lambda13__gtk_tool_button_clicked, self, 0);
	_g_object_unref0 (zoom_out_tool);
	_g_object_unref0 (zoom_in_tool);
	_g_object_unref0 (resize_tool);
	_g_object_unref0 (resize_icon);
	_g_object_unref0 (random_tool);
	_g_object_unref0 (random_icon);
	_g_object_unref0 (solve_tool);
	_g_object_unref0 (solve_icon);
	_g_object_unref0 (restart_tool);
	_g_object_unref0 (peek_icon);
	_g_object_unref0 (save_as_tool);
	_g_object_unref0 (load_tool);
	_g_object_unref0 (new_tool);
	block2_data_unref (_data2_);
	_data2_ = NULL;
}


static void gnonogram_view_toggle_execute (Gnonogram_view* self) {
	gboolean _tmp0_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_tmp0_ = gtk_toggle_tool_button_get_active (self->priv->_hide_tool);
	if (_tmp0_) {
		g_signal_emit_by_name (self, "hidegame");
	} else {
		g_signal_emit_by_name (self, "revealgame");
	}
}


static void gnonogram_view_toggle_toolbar (Gnonogram_view* self, GtkMenuItem* cmi) {
	gboolean _tmp0_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	g_return_if_fail (GTK_IS_MENU_ITEM (cmi));
	_tmp0_ = gtk_check_menu_item_get_active (GTK_CHECK_MENU_ITEM (cmi));
	gtk_widget_set_visible (GTK_WIDGET (self->_toolbar), _tmp0_);
}


static Block3Data* block3_data_ref (Block3Data* _data3_) {
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void block3_data_unref (Block3Data* _data3_) {
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		_g_object_unref0 (_data3_->self);
		_g_object_unref0 (_data3_->grade_spin2);
		_g_object_unref0 (_data3_->win);
		g_slice_free (Block3Data, _data3_);
	}
}


static gboolean _lambda10_ (Block3Data* _data3_) {
	Gnonogram_view * self;
	gboolean result = FALSE;
	gdouble _tmp0_;
	self = _data3_->self;
	_tmp0_ = gtk_spin_button_get_value (_data3_->grade_spin2);
	gnonogram_view_set_grade_spin_value (self, _tmp0_);
	gtk_object_destroy (GTK_OBJECT (_data3_->win));
	result = TRUE;
	return result;
}


static gboolean __lambda10__gtk_widget_leave_notify_event (GtkWidget* _sender, GdkEventCrossing* event, gpointer self) {
	gboolean result;
	result = _lambda10_ (self);
	return result;
}


static void gnonogram_view_getdifficulty (Gnonogram_view* self) {
	Block3Data* _data3_;
	GtkWindow* _tmp0_ = NULL;
	GtkSpinButton* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gdouble _tmp3_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_data3_->self = g_object_ref (self);
	_tmp0_ = (GtkWindow*) gtk_window_new (GTK_WINDOW_TOPLEVEL);
	_data3_->win = g_object_ref_sink (_tmp0_);
	gtk_window_set_decorated (_data3_->win, FALSE);
	_tmp1_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) 1, (gdouble) 10, (gdouble) 1);
	_data3_->grade_spin2 = g_object_ref_sink (_tmp1_);
	_tmp2_ = _ ("Set the difficulty of generated games");
	gtk_widget_set_tooltip_text (GTK_WIDGET (_data3_->grade_spin2), _tmp2_);
	gtk_widget_set_can_focus (GTK_WIDGET (_data3_->grade_spin2), FALSE);
	_tmp3_ = gtk_spin_button_get_value (self->priv->_grade_spin);
	gtk_spin_button_set_value (_data3_->grade_spin2, _tmp3_);
	gtk_container_add (GTK_CONTAINER (_data3_->win), GTK_WIDGET (_data3_->grade_spin2));
	g_signal_connect_data (GTK_WIDGET (_data3_->win), "leave-notify-event", (GCallback) __lambda10__gtk_widget_leave_notify_event, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	gtk_window_set_position (_data3_->win, GTK_WIN_POS_MOUSE);
	gtk_widget_show_all (GTK_WIDGET (_data3_->win));
	block3_data_unref (_data3_);
	_data3_ = NULL;
}


static void gnonogram_view_show_about (Gnonogram_view* self) {
	gchar* _tmp0_;
	gchar** _tmp1_ = NULL;
	gchar** authors;
	gint authors_length1;
	gint _authors_size_;
	gchar* _tmp2_;
	GtkImage* _tmp3_ = NULL;
	GtkImage* _tmp4_;
	GtkImage* _logo;
	const gchar* _tmp5_ = NULL;
	const gchar* _tmp6_ = NULL;
	GdkPixbuf* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_tmp0_ = g_strdup ("Jeremy Wootten <jeremywootten@gmail.com>");
	_tmp1_ = g_new0 (gchar*, 2 + 1);
	_tmp1_[0] = _tmp0_;
	_tmp1_[1] = NULL;
	authors = _tmp1_;
	authors_length1 = 2;
	_authors_size_ = 2;
	_tmp2_ = g_strconcat (resource_resource_dir, "/icons/gnonograms48.png", NULL);
	_tmp3_ = (GtkImage*) gtk_image_new_from_file (_tmp2_);
	_logo = (_tmp4_ = g_object_ref_sink (_tmp3_), _g_free0 (_tmp2_), _tmp4_);
	_tmp5_ = _ ("Gnonograms");
	_tmp6_ = _ ("Design and solve Nonogram puzzles");
	_tmp7_ = gtk_image_get_pixbuf (_logo);
	_tmp8_ = _ ("About Gnonograms");
	gtk_show_about_dialog (NULL, "program-name", _tmp5_, "version", _VERSION, "comments", _tmp6_, "license", "Gnonograms is free software; you can redistribute it and/or modify it " \
"under the terms of the GNU General Public Licence as published by the " \
"Free Software Foundation; either version 2 of the Licence, or (at your" \
" option) any later version.\n" \
"\n" \
"Gnonogram is distributed in the hope that it will be useful, but WITHO" \
"UT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY " \
"or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public Licen" \
"ce for more details.\n" \
"\n" \
"You should have received a copy of the GNU General Public Licence alon" \
"g with Nautilus; if not, write to the Free Software Foundation, Inc., " \
"51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA", "wrap_license", TRUE, "logo", _tmp7_, "title", _tmp8_, "authors", authors, NULL, NULL);
	_g_object_unref0 (_logo);
	authors = (_vala_array_free (authors, authors_length1, (GDestroyNotify) g_free), NULL);
}


static void gnonogram_view_show_manual (Gnonogram_view* self) {
	gchar* manual_uri;
	GdkScreen* _tmp0_ = NULL;
	guint32 _tmp1_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	manual_uri = g_strconcat ("ghelp:", resource_manual_dir, NULL);
	_tmp0_ = gtk_window_get_screen (GTK_WINDOW (self));
	_tmp1_ = gtk_get_current_event_time ();
	gtk_show_uri (_tmp0_, manual_uri, _tmp1_, &_inner_error_);
	if (_inner_error_ != NULL) {
		goto __catch7_g_error;
	}
	goto __finally7;
	__catch7_g_error:
	{
		GError * e;
		e = _inner_error_;
		_inner_error_ = NULL;
		utils_show_warning_dialog (e->message);
		_g_error_free0 (e);
	}
	__finally7:
	if (_inner_error_ != NULL) {
		_g_free0 (manual_uri);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_g_free0 (manual_uri);
}


static void gnonogram_view_editdescription (Gnonogram_view* self) {
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	GtkDialog* _tmp2_ = NULL;
	GtkDialog* dialog;
	const gchar* _tmp3_ = NULL;
	GtkLabel* _tmp4_ = NULL;
	GtkLabel* name_label;
	const gchar* _tmp5_ = NULL;
	GtkLabel* _tmp6_ = NULL;
	GtkLabel* author_label;
	const gchar* _tmp7_ = NULL;
	GtkLabel* _tmp8_ = NULL;
	GtkLabel* date_label;
	GtkVBox* _tmp9_ = NULL;
	GtkVBox* label_box;
	GtkEntry* _tmp10_ = NULL;
	GtkEntry* name_entry;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_;
	GtkEntry* _tmp13_ = NULL;
	GtkEntry* author_entry;
	gchar* _tmp14_ = NULL;
	gchar* _tmp15_;
	GtkEntry* _tmp16_ = NULL;
	GtkEntry* date_entry;
	gchar* _tmp17_ = NULL;
	gchar* _tmp18_;
	GtkVBox* _tmp19_ = NULL;
	GtkVBox* entry_box;
	GtkHBox* _tmp20_ = NULL;
	GtkHBox* hbox;
	gint _tmp21_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_tmp0_ = _ ("Ok");
	_tmp1_ = _ ("Cancel");
	_tmp2_ = (GtkDialog*) gtk_dialog_new_with_buttons (NULL, NULL, GTK_DIALOG_MODAL | GTK_DIALOG_DESTROY_WITH_PARENT, _tmp0_, GTK_RESPONSE_OK, _tmp1_, GTK_RESPONSE_CANCEL, NULL);
	dialog = g_object_ref_sink (_tmp2_);
	_tmp3_ = _ ("Name of puzzle");
	_tmp4_ = (GtkLabel*) gtk_label_new (_tmp3_);
	name_label = g_object_ref_sink (_tmp4_);
	_tmp5_ = _ ("Designed by");
	_tmp6_ = (GtkLabel*) gtk_label_new (_tmp5_);
	author_label = g_object_ref_sink (_tmp6_);
	_tmp7_ = _ ("Date designed");
	_tmp8_ = (GtkLabel*) gtk_label_new (_tmp7_);
	date_label = g_object_ref_sink (_tmp8_);
	_tmp9_ = (GtkVBox*) gtk_vbox_new (FALSE, 5);
	label_box = g_object_ref_sink (_tmp9_);
	gtk_container_add (GTK_CONTAINER (label_box), GTK_WIDGET (name_label));
	gtk_container_add (GTK_CONTAINER (label_box), GTK_WIDGET (author_label));
	gtk_container_add (GTK_CONTAINER (label_box), GTK_WIDGET (date_label));
	_tmp10_ = (GtkEntry*) gtk_entry_new ();
	name_entry = g_object_ref_sink (_tmp10_);
	gtk_entry_set_max_length (name_entry, 32);
	_tmp11_ = gnonogram_view_get_name (self);
	_tmp12_ = _tmp11_;
	gtk_entry_set_text (name_entry, _tmp12_);
	_g_free0 (_tmp12_);
	_tmp13_ = (GtkEntry*) gtk_entry_new ();
	author_entry = g_object_ref_sink (_tmp13_);
	gtk_entry_set_max_length (author_entry, 32);
	_tmp14_ = gnonogram_view_get_author (self);
	_tmp15_ = _tmp14_;
	gtk_entry_set_text (author_entry, _tmp15_);
	_g_free0 (_tmp15_);
	_tmp16_ = (GtkEntry*) gtk_entry_new ();
	date_entry = g_object_ref_sink (_tmp16_);
	gtk_entry_set_max_length (date_entry, 16);
	_tmp17_ = gnonogram_view_get_date (self);
	_tmp18_ = _tmp17_;
	gtk_entry_set_text (date_entry, _tmp18_);
	_g_free0 (_tmp18_);
	_tmp19_ = (GtkVBox*) gtk_vbox_new (FALSE, 5);
	entry_box = g_object_ref_sink (_tmp19_);
	gtk_container_add (GTK_CONTAINER (entry_box), GTK_WIDGET (name_entry));
	gtk_container_add (GTK_CONTAINER (entry_box), GTK_WIDGET (author_entry));
	gtk_container_add (GTK_CONTAINER (entry_box), GTK_WIDGET (date_entry));
	_tmp20_ = (GtkHBox*) gtk_hbox_new (FALSE, 5);
	hbox = g_object_ref_sink (_tmp20_);
	gtk_container_add (GTK_CONTAINER (hbox), GTK_WIDGET (label_box));
	gtk_container_add (GTK_CONTAINER (hbox), GTK_WIDGET (entry_box));
	gtk_container_add (GTK_CONTAINER (dialog->vbox), GTK_WIDGET (hbox));
	gtk_widget_show_all (GTK_WIDGET (dialog));
	_tmp21_ = gtk_dialog_run (dialog);
	if (_tmp21_ == GTK_RESPONSE_OK) {
		const gchar* _tmp22_ = NULL;
		const gchar* _tmp23_ = NULL;
		const gchar* _tmp24_ = NULL;
		_tmp22_ = gtk_entry_get_text (name_entry);
		gnonogram_view_set_name (self, _tmp22_);
		_tmp23_ = gtk_entry_get_text (author_entry);
		gnonogram_view_set_author (self, _tmp23_);
		_tmp24_ = gtk_entry_get_text (date_entry);
		gnonogram_view_set_date (self, _tmp24_);
	}
	gtk_object_destroy (GTK_OBJECT (dialog));
	_g_object_unref0 (hbox);
	_g_object_unref0 (entry_box);
	_g_object_unref0 (date_entry);
	_g_object_unref0 (author_entry);
	_g_object_unref0 (name_entry);
	_g_object_unref0 (label_box);
	_g_object_unref0 (date_label);
	_g_object_unref0 (author_label);
	_g_object_unref0 (name_label);
	_g_object_unref0 (dialog);
}


void gnonogram_view_set_name (Gnonogram_view* self, const gchar* name) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	g_return_if_fail (name != NULL);
	_tmp0_ = _ ("Name:");
	_tmp1_ = g_strconcat (_tmp0_, " ", NULL);
	_tmp2_ = g_strconcat (_tmp1_, name, NULL);
	_tmp3_ = g_strconcat (_tmp2_, "  ", NULL);
	gtk_label_set_text (self->priv->_name_label, _tmp3_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	_g_free0 (_tmp1_);
}


gchar* gnonogram_view_get_name (Gnonogram_view* self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	_tmp0_ = gnonogram_view_get_info_item (self, self->priv->_name_label);
	result = _tmp0_;
	return result;
}


void gnonogram_view_set_author (Gnonogram_view* self, const gchar* author) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	g_return_if_fail (author != NULL);
	_tmp0_ = _ ("By:");
	_tmp1_ = g_strconcat (_tmp0_, " ", NULL);
	_tmp2_ = g_strconcat (_tmp1_, author, NULL);
	_tmp3_ = g_strconcat (_tmp2_, "  ", NULL);
	gtk_label_set_text (self->priv->_author_label, _tmp3_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	_g_free0 (_tmp1_);
}


gchar* gnonogram_view_get_author (Gnonogram_view* self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	_tmp0_ = gnonogram_view_get_info_item (self, self->priv->_author_label);
	result = _tmp0_;
	return result;
}


void gnonogram_view_set_date (Gnonogram_view* self, const gchar* date) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	g_return_if_fail (date != NULL);
	_tmp0_ = _ ("Date:");
	_tmp1_ = g_strconcat (_tmp0_, " ", NULL);
	_tmp2_ = g_strconcat (_tmp1_, date, NULL);
	_tmp3_ = g_strconcat (_tmp2_, "  ", NULL);
	gtk_label_set_text (self->priv->_date_label, _tmp3_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	_g_free0 (_tmp1_);
}


gchar* gnonogram_view_get_date (Gnonogram_view* self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	_tmp0_ = gnonogram_view_get_info_item (self, self->priv->_date_label);
	result = _tmp0_;
	return result;
}


void gnonogram_view_set_score_label (Gnonogram_view* self, const gchar* score) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	g_return_if_fail (score != NULL);
	_tmp0_ = _ ("Score:");
	_tmp1_ = g_strconcat (_tmp0_, " ", NULL);
	_tmp2_ = g_strconcat (_tmp1_, score, NULL);
	_tmp3_ = g_strconcat (_tmp2_, "  ", NULL);
	gtk_label_set_text (self->priv->_score_label, _tmp3_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
	_g_free0 (_tmp1_);
}


gchar* gnonogram_view_get_score (Gnonogram_view* self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	_tmp0_ = gnonogram_view_get_info_item (self, self->priv->_score_label);
	result = _tmp0_;
	return result;
}


static gchar* string_strip (const gchar* self) {
	gchar* result = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _result_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup (self);
	_result_ = _tmp0_;
	g_strstrip (_result_);
	result = _result_;
	return result;
}


static gchar* gnonogram_view_get_info_item (Gnonogram_view* self, GtkLabel* l) {
	gchar* result = NULL;
	const gchar* _tmp0_ = NULL;
	gchar** _tmp1_;
	gchar** _tmp2_ = NULL;
	gchar** s;
	gint s_length1;
	gint _s_size_;
	gchar* info = NULL;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), NULL);
	g_return_val_if_fail (GTK_IS_LABEL (l), NULL);
	_tmp0_ = gtk_label_get_text (l);
	_tmp2_ = _tmp1_ = g_strsplit (_tmp0_, ":", 2);
	s = _tmp2_;
	s_length1 = _vala_array_length (_tmp1_);
	_s_size_ = _vala_array_length (_tmp1_);
	if (s_length1 > 1) {
		gchar* _tmp3_ = NULL;
		gchar* _tmp4_;
		_tmp3_ = string_strip (s[1]);
		_tmp4_ = _tmp3_;
		_g_free0 (info);
		info = _tmp4_;
		if (g_strcmp0 (info, "") == 0) {
			const gchar* _tmp5_ = NULL;
			gchar* _tmp6_;
			gchar* _tmp7_;
			_tmp5_ = _ ("Unknown");
			_tmp6_ = g_strdup (_tmp5_);
			_tmp7_ = _tmp6_;
			_g_free0 (info);
			info = _tmp7_;
		}
	} else {
		const gchar* _tmp8_ = NULL;
		gchar* _tmp9_;
		gchar* _tmp10_;
		_tmp8_ = _ ("Unknown");
		_tmp9_ = g_strdup (_tmp8_);
		_tmp10_ = _tmp9_;
		_g_free0 (info);
		info = _tmp10_;
	}
	result = info;
	s = (_vala_array_free (s, s_length1, (GDestroyNotify) g_free), NULL);
	return result;
}


void gnonogram_view_set_size (Gnonogram_view* self, gint r, gint c) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_ = NULL;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_tmp0_ = _ ("Size: ");
	_tmp1_ = g_strdup_printf ("%i", r);
	_tmp2_ = _tmp1_;
	_tmp3_ = g_strconcat (_tmp0_, _tmp2_, NULL);
	_tmp4_ = g_strconcat (_tmp3_, "X", NULL);
	_tmp5_ = g_strdup_printf ("%i", c);
	_tmp6_ = _tmp5_;
	_tmp7_ = g_strconcat (_tmp4_, _tmp6_, NULL);
	_tmp8_ = g_strconcat (_tmp7_, "  ", NULL);
	gtk_label_set_text (self->priv->_size_label, _tmp8_);
	_g_free0 (_tmp8_);
	_g_free0 (_tmp7_);
	_g_free0 (_tmp6_);
	_g_free0 (_tmp4_);
	_g_free0 (_tmp3_);
	_g_free0 (_tmp2_);
}


void gnonogram_view_set_grade_spin_value (Gnonogram_view* self, gdouble d) {
	gdouble _tmp0_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	_tmp0_ = CLAMP (d, 1.0, 10.0);
	gtk_spin_button_set_value (self->priv->_grade_spin, _tmp0_);
}


gdouble gnonogram_view_get_grade_spin_value (Gnonogram_view* self) {
	gdouble result = 0.0;
	gdouble _tmp0_;
	g_return_val_if_fail (IS_GNONOGRAM_VIEW (self), 0.0);
	_tmp0_ = gtk_spin_button_get_value (self->priv->_grade_spin);
	result = _tmp0_;
	return result;
}


void gnonogram_view_state_has_changed (Gnonogram_view* self, GameState gs) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (IS_GNONOGRAM_VIEW (self));
	gtk_widget_set_sensitive (GTK_WIDGET (self->priv->_check_tool), gs == GAME_STATE_SOLVING);
	_tmp0_ = gtk_widget_get_sensitive (GTK_WIDGET (self->priv->_check_tool));
	gtk_widget_set_sensitive (GTK_WIDGET (self->priv->_checkerrorsmenuitem), _tmp0_);
	_tmp1_ = gtk_widget_get_sensitive (GTK_WIDGET (self->priv->_check_tool));
	gtk_widget_set_sensitive (GTK_WIDGET (self->priv->_showsolutionmenuitem), _tmp1_);
	_tmp2_ = gtk_widget_get_sensitive (GTK_WIDGET (self->priv->_check_tool));
	gtk_widget_set_sensitive (GTK_WIDGET (self->priv->_showworkingmenuitem), !_tmp2_);
	if (gs == GAME_STATE_SETTING) {
		const gchar* _tmp3_ = NULL;
		_tmp3_ = _ ("Hide the solution and start solving");
		gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (self->priv->_hide_tool), _tmp3_);
		gtk_toggle_tool_button_set_active (self->priv->_hide_tool, FALSE);
		gtk_check_menu_item_set_active (self->priv->_gridmenuitem, FALSE);
	} else {
		const gchar* _tmp4_ = NULL;
		_tmp4_ = _ ("Reveal the solution");
		gtk_tool_item_set_tooltip_text (GTK_TOOL_ITEM (self->priv->_hide_tool), _tmp4_);
		gtk_toggle_tool_button_set_active (self->priv->_hide_tool, TRUE);
		gtk_check_menu_item_set_active (self->priv->_gridmenuitem, TRUE);
	}
}


static void gnonogram_view_class_init (Gnonogram_viewClass * klass) {
	gnonogram_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (Gnonogram_viewPrivate));
	G_OBJECT_CLASS (klass)->finalize = gnonogram_view_finalize;
	g_signal_new ("solvegame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("savegame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("savepictogame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("loadgame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__STRING, G_TYPE_NONE, 1, G_TYPE_STRING);
	g_signal_new ("saveposition", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("loadposition", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("quitgamesignal", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("newgame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("hidegame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("revealgame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("checkerrors", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("restartgame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("randomgame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("setcolors", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("setfont", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("setdifficulty", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__DOUBLE, G_TYPE_NONE, 1, G_TYPE_DOUBLE);
	g_signal_new ("resizegame", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("togglegrid", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
	g_signal_new ("changefont", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
	g_signal_new ("advancedmode", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
	g_signal_new ("difficultmode", TYPE_GNONOGRAM_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
}


static void gnonogram_view_instance_init (Gnonogram_view * self) {
	self->priv = GNONOGRAM_VIEW_GET_PRIVATE (self);
}


static void gnonogram_view_finalize (GObject* obj) {
	Gnonogram_view * self;
	self = GNONOGRAM_VIEW (obj);
	_gnonogram_controller_unref0 (self->priv->_controller);
	_g_object_unref0 (self->priv->_grade_spin);
	_g_object_unref0 (self->priv->_hide_tool);
	_g_object_unref0 (self->priv->_check_tool);
	_g_object_unref0 (self->_toolbar);
	_g_object_unref0 (self->priv->_gridmenuitem);
	_g_object_unref0 (self->priv->_checkerrorsmenuitem);
	_g_object_unref0 (self->priv->_showsolutionmenuitem);
	_g_object_unref0 (self->priv->_showworkingmenuitem);
	_g_object_unref0 (self->priv->grademenuitem);
	_g_object_unref0 (self->priv->_name_label);
	_g_object_unref0 (self->priv->_author_label);
	_g_object_unref0 (self->priv->_date_label);
	_g_object_unref0 (self->priv->_size_label);
	_g_object_unref0 (self->priv->_score_label);
	G_OBJECT_CLASS (gnonogram_view_parent_class)->finalize (obj);
}


GType gnonogram_view_get_type (void) {
	static volatile gsize gnonogram_view_type_id__volatile = 0;
	if (g_once_init_enter (&gnonogram_view_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (Gnonogram_viewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gnonogram_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Gnonogram_view), 0, (GInstanceInitFunc) gnonogram_view_instance_init, NULL };
		GType gnonogram_view_type_id;
		gnonogram_view_type_id = g_type_register_static (GTK_TYPE_WINDOW, "Gnonogram_view", &g_define_type_info, 0);
		g_once_init_leave (&gnonogram_view_type_id__volatile, gnonogram_view_type_id);
	}
	return gnonogram_view_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



